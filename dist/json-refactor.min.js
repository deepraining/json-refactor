!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=b(a,!0):b(a)}("undefined"!=typeof window?window:this,function(a,b){function c(){var a=arguments[0];if("undefined"==typeof a||null===a)return{};if("object"!=typeof a)return a;var b,e=arguments[1],f=!0;e instanceof Array||(e=a,f=!1);var g,h={};for(g in e)b=f?e[g]:g,a.hasOwnProperty(b)&&(a[b]instanceof Array?h[b]=d(a[b]):"object"==typeof a[b]?h[b]=c(a[b]):h[b]=a[b]);return h}function d(a){if("undefined"==typeof a||null===a)return[];if(!(a instanceof Array))return[];var b,d=[];for(b in a)"object"==typeof a[b]?d[b]=c(a[b]):d[b]=a[b];return d}function e(a,b){switch(b){case"int":return parseInt(a);case"float":return parseFloat(a);case"bool":return!!a;case"string":return a+"";default:return a}}function f(a,b,c){var d=b[c],f=d.split("!"),g=f[0],h=f[1],i=a[g];a[c]=h?e(i,h):i,delete a[g]}function g(a,b){Array.isArray(b)?a.map(function(a){b[0]&&"object"==typeof a&&g(a,b[0])}):Object.keys(b).map(function(c){var d,e;d=b[c],e=c.startsWith("_")&&void 0==a[c]?a[c.slice(1)]:a[c],"object"==typeof d&&e?Array.isArray(d)?e.map(function(a){d[0]&&"object"==typeof a&&g(a,d[0])}):g(e,d):f(a,b,c)})}var h=function(a,b,e){var f=e?a instanceof Array?d(a):c(a):a;return g(f,b),f};return b||(a.JSON.refactor=h),h});