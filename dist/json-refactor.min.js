!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=b(a,!0):b(a)}("undefined"!=typeof window?window:this,function(a,b){function c(){var a=arguments[0];if("undefined"==typeof a||null===a)return{};if("object"!=typeof a)return a;var b,e=arguments[1],f=!0;e instanceof Array||(e=a,f=!1);var g,h={};for(g in e)b=f?e[g]:g,a.hasOwnProperty(b)&&(a[b]instanceof Array?h[b]=d(a[b]):"object"==typeof a[b]?h[b]=c(a[b]):h[b]=a[b]);return h}function d(a){if("undefined"==typeof a||null===a)return[];if(!(a instanceof Array))return[];var b,d=[];for(b in a)"object"==typeof a[b]?d[b]=c(a[b]):d[b]=a[b];return d}function e(a,b){switch(b){case"int":return parseInt(a);case"float":return parseFloat(a);case"bool":return!!a;case"string":return a+"";default:return a}}function f(a,b,f,g){var h,i=f.length;if(2==i)h=void 0!=a[f[0]]&&a[f[0]][f[1]];else if(3==i)h=void 0!=a[f[0]]&&void 0!=a[f[0]][f[1]]&&a[f[0]][f[1]][f[2]];else{if(4!=i)return void console.error("点语法的解析最大只支持四级");h=void 0!=a[f[0]]&&void 0!=a[f[0]][f[1]]&&void 0!=a[f[0]][f[1]][f[2]]&&a[f[0]][f[1]][f[2]][f[3]]}"object"!=typeof h?a[b]=g?e(h,g):h:Array.isArray(h)?a[b]=d(h):a[b]=c(h)}function g(a,b,c){var d=b[c],g=d.split("!"),h=g[0],i=g[1],j=a[h],k=!!~h.indexOf("."),l=k&&h.split(".");k&&l.length>1?f(a,c,l,i):(a[c]=i?e(j,i):j,delete a[h])}function h(a,b){Array.isArray(b)?a.map(function(a){b[0]&&"object"==typeof a&&h(a,b[0])}):Object.keys(b).map(function(c){var d,e;d=b[c],e=c.startsWith("_")&&void 0==a[c]?a[c.slice(1)]:a[c],"object"==typeof d&&e?Array.isArray(d)?e.map(function(a){d[0]&&"object"==typeof a&&h(a,d[0])}):h(e,d):g(a,b,c)})}var i=function(a,b,e){var f=e?a instanceof Array?d(a):c(a):a;return h(f,b),f};return b||(a.JSON.refactor=i),i});